import{r as l,j as e,S as I,A as Q}from"./app-DoExwldR.js";import{u as M,a as T,P as D,F as L,b as m,c as p,d as j,e as b,j as S,k as A,B as y,o as G,s as f,T as W,C as X,m as Y,n as ee,p as se,q as te,r as v,t as ae,v as _,w as ne,x as k,S as oe,f as re,g as ie,h as le,i as ce,y as de,z as ue,A as g,D as xe,E as he,G as ge,H as me,I as pe,J as je,K as be,L as z,M as w,N as Se,O as fe}from"./main-layout-CTjnwfnD.js";import{B as n}from"./button-BPQVsfvB.js";import{D as q,a as Ce,b as E,c as H,d as V,e as B,f as K,g as O}from"./dialog-DV3pfT-v.js";import{I as C}from"./input-Cs_lRMTk.js";import{L as Pe}from"./label-CtHqeoCy.js";import{L as ve}from"./loader-circle-BNxcebvS.js";import{C as we}from"./app-sidebar-header-bt5vi90M.js";import"./utils-DInivZKq.js";import"./search-tO9priOw.js";import"./index-BpABxj1R.js";import"./key-OCUAw2XA.js";const ye=G({product_name:f().min(1,"Product name is required").max(100,"Product name must be at most 100 characters long"),product_code:f().min(1,"Product code is required").regex(/^[a-zA-Z0-9_-]+$/,"Product code can only contain letters, numbers, underscores, and hyphens").max(50,"Product code must be at most 50 characters long")}),Ne=()=>{const[h,u]=l.useState(!1),[o,x]=l.useState(!1),r=M({resolver:T(ye)});function i(c){x(!0);try{I.post(route("products.create"),c,{onSuccess:()=>{u(!1)},onFinish:()=>{x(!1)}})}catch(d){console.error("Form submission error",d)}}return e.jsxs(q,{open:h,onOpenChange:u,children:[e.jsx(Ce,{asChild:!0,children:e.jsxs(n,{children:[e.jsx(D,{}),"Create Product"]})}),e.jsxs(E,{children:[e.jsxs(H,{children:[e.jsx(V,{children:"Create Product"}),e.jsx(B,{})]}),e.jsx(L,{...r,children:e.jsxs("form",{onSubmit:r.handleSubmit(i),className:"space-y-4",children:[e.jsx(m,{control:r.control,name:"product_name",render:({field:c})=>e.jsxs(p,{children:[e.jsx(j,{children:"Product Name *"}),e.jsx(b,{children:e.jsx(C,{placeholder:"Pixelbot 3.0",type:"text",...c})}),e.jsx(S,{})]})}),e.jsx(m,{control:r.control,name:"product_code",render:({field:c})=>e.jsxs(p,{children:[e.jsx(j,{children:"Product Code *"}),e.jsx(b,{children:e.jsx(C,{placeholder:"pixelbotv3",type:"text",...c})}),e.jsx(A,{children:"This will be used to identify the license key product on the applications"}),e.jsx(S,{})]})}),e.jsxs(K,{children:[e.jsx(O,{asChild:!0,children:e.jsx(n,{variant:"outline",children:"Cancel"})}),e.jsx(y,{type:"submit",icon:D,loading:o,children:"Create"})]})]})})]})]})},Re=G({product_name:f().min(1,"Product name is required").max(100,"Product name must be at most 100 characters long"),product_code:f().min(1,"Product code is required").regex(/^[a-zA-Z0-9_-]+$/,"Product code can only contain letters, numbers, underscores, and hyphens").max(50,"Product code must be at most 50 characters long")}),Fe=({open:h=!1,onOpenChange:u=()=>{},product:o})=>{const[x,r]=l.useState(!1),i=M({resolver:T(Re)});function c(d){r(!0);try{I.put(route("products.update",o.id),d,{onSuccess:()=>{u(!1)},onFinish:()=>{r(!1)}})}catch(P){console.error("Form submission error",P)}}return l.useEffect(()=>{o&&i.reset({product_name:o.name,product_code:o.product_code})},[o,i]),e.jsx(q,{open:h,onOpenChange:u,children:e.jsxs(E,{children:[e.jsxs(H,{children:[e.jsx(V,{children:"Update Product"}),e.jsx(B,{})]}),e.jsx(L,{...i,children:e.jsxs("form",{onSubmit:i.handleSubmit(c),className:"space-y-4",children:[e.jsx(m,{control:i.control,name:"product_name",render:({field:d})=>e.jsxs(p,{children:[e.jsx(j,{children:"Product Name"}),e.jsx(b,{children:e.jsx(C,{placeholder:"Pixelbot 3.0",type:"text",...d})}),e.jsx(S,{})]})}),e.jsx(m,{control:i.control,name:"product_code",render:({field:d})=>e.jsxs(p,{children:[e.jsx(j,{children:"Product Code"}),e.jsx(b,{children:e.jsx(C,{placeholder:"pixelbotv3",type:"text",...d})}),e.jsx(A,{children:"This will be used to identify the license key product on the applications"}),e.jsx(S,{})]})}),e.jsx(K,{children:e.jsxs("div",{className:"flex justify-between w-full",children:[e.jsx(y,{type:"submit",icon:W,variant:"destructive",loading:x,children:"Delete"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(O,{asChild:!0,children:e.jsx(n,{variant:"outline",children:"Cancel"})}),e.jsx(y,{type:"submit",icon:X,loading:x,children:"Save Changes"})]})]})})]})})]})})},De=({data:h=[]})=>{var F;const u=[{id:"select",header:({table:s})=>e.jsx(z,{checked:s.getIsAllPageRowsSelected()||s.getIsSomePageRowsSelected()&&"indeterminate",onCheckedChange:a=>s.toggleAllPageRowsSelected(!!a),"aria-label":"Select all"}),cell:({row:s})=>e.jsx(z,{checked:s.getIsSelected(),onCheckedChange:a=>s.toggleSelected(!!a),"aria-label":"Select row"}),enableSorting:!1,enableHiding:!1},{accessorKey:"name",header:({column:s})=>e.jsxs(n,{variant:"ghost",onClick:()=>s.toggleSorting(s.getIsSorted()==="asc"),children:["Product Name",e.jsx(w,{})]}),cell:({row:s})=>e.jsx("div",{className:"capitalize",children:s.getValue("name")})},{accessorKey:"product_code",header:({column:s})=>e.jsxs(n,{variant:"ghost",onClick:()=>s.toggleSorting(s.getIsSorted()==="asc"),children:["Product Code",e.jsx(w,{})]}),cell:({row:s})=>e.jsx("span",{className:"pointer-events-none",children:s.getValue("product_code")})},{accessorKey:"license_count",header:({column:s})=>e.jsxs(n,{variant:"ghost",onClick:()=>s.toggleSorting(s.getIsSorted()==="asc"),children:["Issued Licenses",e.jsx(w,{})]}),cell:({row:s})=>e.jsx("span",{children:s.getValue("license_count")})},{accessorKey:"actions",header:({column:s})=>{},cell:({row:s})=>e.jsx("div",{className:"flex justify-end pr-4",children:e.jsx(n,{className:"size-8 text-primary",variant:"ghost",onClick:()=>J(s),children:e.jsx(Se,{className:"size-4"})})})}],[o,x]=l.useState(!1),[r,i]=l.useState(null),[c,d]=l.useState([]),[P,$]=l.useState({}),[N,R]=l.useState(""),[U,Z]=l.useState({pageIndex:0,pageSize:15}),t=Y({data:h,columns:u,onSortingChange:d,getCoreRowModel:be(),getPaginationRowModel:je(),getSortedRowModel:pe(),getFilteredRowModel:me(),onRowSelectionChange:$,onGlobalFilterChange:R,onPaginationChange:Z,state:{sorting:c,rowSelection:P,globalFilter:N,pagination:U}}),J=s=>{const a=s.original;i(a),x(!0)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex items-center py-4 gap-4",children:[e.jsx(Ne,{}),e.jsx(ee,{value:N??"",onChange:s=>R(s),className:"w-96"})]}),e.jsx("div",{className:"rounded-md border bg-background overflow-hidden",children:e.jsxs(se,{children:[e.jsx(te,{children:t.getHeaderGroups().map(s=>e.jsx(v,{className:"bg-sidebar",children:s.headers.map(a=>e.jsx(ae,{children:a.isPlaceholder?null:_(a.column.columnDef.header,a.getContext())},a.id))},s.id))}),e.jsx(ne,{children:(F=t.getRowModel().rows)!=null&&F.length?t.getRowModel().rows.map(s=>e.jsx(v,{"data-state":s.getIsSelected()&&"selected",className:"odd:bg-muted/50 odd:hover:bg-muted/50 border-none hover:bg-transparent",children:s.getVisibleCells().map(a=>e.jsx(k,{children:_(a.column.columnDef.cell,a.getContext())},a.id))},s.id)):e.jsx(v,{children:e.jsx(k,{colSpan:u.length,className:"h-24 text-center",children:e.jsx(Q,{data:"products",fallback:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx(ve,{className:"animate-spin size-8 text-primary"})}),children:"No results."})})})})]})}),e.jsxs("div",{className:"flex items-center justify-between gap-8 py-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Pe,{className:"max-sm:sr-only",children:"Rows per page"}),e.jsxs(oe,{value:t.getState().pagination.pageSize.toString(),onValueChange:s=>{t.setPageSize(Number(s))},children:[e.jsx(re,{className:"w-fit whitespace-nowrap",children:e.jsx(ie,{placeholder:"Select number of results"})}),e.jsx(le,{className:"[&_*[role=option]]:ps-2 [&_*[role=option]]:pe-8 [&_*[role=option]>span]:start-auto [&_*[role=option]>span]:end-2",children:[5,10,15,25,50,100].map(s=>e.jsx(ce,{value:s.toString(),children:s},s))})]})]}),e.jsx("div",{className:"text-muted-foreground flex grow justify-end text-sm whitespace-nowrap",children:e.jsxs("p",{className:"text-muted-foreground text-sm whitespace-nowrap","aria-live":"polite",children:[e.jsxs("span",{className:"text-foreground",children:[t.getState().pagination.pageIndex*t.getState().pagination.pageSize+1,"-",Math.min(Math.max(t.getState().pagination.pageIndex*t.getState().pagination.pageSize+t.getState().pagination.pageSize,0),t.getRowCount())]})," ","of"," ",e.jsx("span",{className:"text-foreground",children:t.getRowCount().toString()})]})}),e.jsx("div",{children:e.jsx(de,{children:e.jsxs(ue,{children:[e.jsx(g,{children:e.jsx(n,{size:"icon",variant:"outline",className:"disabled:pointer-events-none disabled:opacity-50",onClick:()=>t.firstPage(),disabled:!t.getCanPreviousPage(),"aria-label":"Go to first page",children:e.jsx(xe,{size:16,"aria-hidden":"true"})})}),e.jsx(g,{children:e.jsx(n,{size:"icon",variant:"outline",className:"disabled:pointer-events-none disabled:opacity-50",onClick:()=>t.previousPage(),disabled:!t.getCanPreviousPage(),"aria-label":"Go to previous page",children:e.jsx(he,{size:16,"aria-hidden":"true"})})}),e.jsx(g,{children:e.jsx(n,{size:"icon",variant:"outline",className:"disabled:pointer-events-none disabled:opacity-50",onClick:()=>t.nextPage(),disabled:!t.getCanNextPage(),"aria-label":"Go to next page",children:e.jsx(we,{size:16,"aria-hidden":"true"})})}),e.jsx(g,{children:e.jsx(n,{size:"icon",variant:"outline",className:"disabled:pointer-events-none disabled:opacity-50",onClick:()=>t.lastPage(),disabled:!t.getCanNextPage(),"aria-label":"Go to last page",children:e.jsx(ge,{size:16,"aria-hidden":"true"})})})]})})})]})]}),o&&r&&e.jsx(Fe,{open:o,onOpenChange:x,product:r})]})},_e=[{title:"Products",href:route("products.index")}];function Be({products:h}){return e.jsx(fe,{title:"Products",breadcrumbs:_e,children:e.jsx(De,{data:h})})}export{Be as default};
